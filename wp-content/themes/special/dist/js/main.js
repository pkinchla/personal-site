function e(e,t,s){t.split(" ").forEach((t=>e.addEventListener(t,s,!1)))}!function(){if(!("customElements"in window)||!("fetch"in window))return;const e="speedlify-score";class t{constructor(){this.fetches={},this.responses={},this.urls={}}static normalizeUrl(e,t){return`${e}${e.endsWith("/")?"":"/"}`+(t.startsWith("/")?t.substr(1):t)}async fetch(e,s){if(this.urls[e])return!!this.urls[e][s]&&this.urls[e][s].hash;this.fetches[e]||(this.fetches[e]=fetch(t.normalizeUrl(e,"api/urls.json")));let n=await this.fetches[e];this.responses[e]||(this.responses[e]=n.json());let i=await this.responses[e];return this.urls[e]=i,!!i[s]&&i[s].hash}}const s=new t;customElements.define(e,class extends HTMLElement{connectedCallback(){this.speedlifyUrl=this.getAttribute("speedlify-url"),this.shorthash=this.getAttribute("hash"),this.rawData=this.getAttribute("raw-data"),this.url=this.getAttribute("url")||window.location.href,this.urlStore=s,this.rawData||this.speedlifyUrl?this.init():console.log(`Missing \`speedlify-url\` attributes in <${e}>`)}async init(){if(this.rawData){let e=JSON.parse(this.rawData);return this.setTimeAttributes(e),void(this.innerHTML=this.render(e))}let t=this.shorthash;if(t||(t=await this.urlStore.fetch(this.speedlifyUrl,this.url)),!t)return void console.error(`<${e}> could not find hash for URL: ${this.url}`);let s=await this.fetchData(t);this.setTimeAttributes(s),this.innerHTML=this.render(s)}async fetchData(e){let s=await fetch(t.normalizeUrl(this.speedlifyUrl,`api/${e}.json`));return await s.json()}setTimeAttributes(e){e.timestamp&&(this.setAttribute("title",`Results from ${this.timeAgo(e.timestamp)}`),this.setAttribute("data-timestamp",e.timestamp))}timeAgo(e){let t=Math.floor((new Date-e)/864e5);return`${t} day${1!=t?"s":""} ago`}getScoreClass(e){return e<.5?"speedlify-score speedlify-score-bad":e<.9?"speedlify-score speedlify-score-ok":"speedlify-score speedlify-score-good"}getScoreTemplate(e){let t=[];return t.push(`<span title="Performance" class="${this.getScoreClass(e.lighthouse.performance)}">${parseInt(100*e.lighthouse.performance,10)}</span>`),t.push(`<span title="Accessibility" class="${this.getScoreClass(e.lighthouse.accessibility)}">${parseInt(100*e.lighthouse.accessibility,10)}</span>`),t.push(`<span title="Best Practices" class="${this.getScoreClass(e.lighthouse.bestPractices)}">${parseInt(100*e.lighthouse.bestPractices,10)}</span>`),t.push(`<span title="SEO" class="${this.getScoreClass(e.lighthouse.seo)}">${parseInt(100*e.lighthouse.seo,10)}</span>`),t.join(" ")}render(e){let t=[],s=this.getScoreTemplate(e);(this.hasAttribute("requests")||this.hasAttribute("weight")||this.hasAttribute("rank"))&&!this.hasAttribute("score")||t.push(s);let n=e.weight.summary.split(" â€¢ ");if(this.hasAttribute("requests")&&t.push(`<span class="speedlify-requests">${n[0]}</span>`),this.hasAttribute("weight")&&t.push(`<span class="speedlify-weight">${n[1]}</span>`),this.hasAttribute("rank")){let s=this.getAttribute("rank-url");t.push(`<${s?`a href="${s}"`:"span"} class="speedlify-rank">${e.ranks.cumulative}</${s?"a":"span"}>`)}if(this.hasAttribute("rank-change")&&e.previousRanks){let s=e.previousRanks.cumulative-e.ranks.cumulative;t.push(`<span class="speedlify-rank-change ${s>0?"up":s<0?"down":"same"}">${0!==s?Math.abs(s):""}</span>`)}return t.join("")}})}(),window.addEventListener("DOMContentLoaded",(function(){return document.querySelector("html").classList.remove("no-js"),function(){if("CSS"in window==0||"supports"in CSS==0)return;const t=window.localStorage.font_weight||getComputedStyle(document.documentElement).getPropertyValue("--variable-wght-bold");window.localStorage.font_weight&&document.documentElement.style.setProperty("--variable-wght-bold",window.localStorage.font_weight);const s=document.createElement("fieldset");s.classList.add("font-settings","sans-bold-italic");const n=`\n    <legend>Font Weight</legend>\n    <span>\n      <label for="range">Bold Sans-serif</label>\n      <input type="range" id="range" name="wght-bold" min="100" max="900" value=${t}>\n      <label for="number" class="assistive-text">Bold Sans-serif</label>\n      <span class="number">\n        <button class="decrement">\n          <span class='assistive-text'>decrement font weight</span>\n          <span aria-hidden="true">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n              <path d="M88.2 38.5c6.2 0 11.2 4.9 11.2 11.1 0 6.2-5 11.2-11.2 11.3l-27.1.2-22.3.2-27 .2C5.6 61.5.6 56.6.6 50.4c0-6.2 5-11.2 11.2-11.3l27.1-.2 22.3-.2 27-.2z" />\n            </svg>\n          </span>          \n        </button>\n        <input pattern="[0-9]*" id="number" type="number" min="100" max="900" step="100" maxlength="3" name="wght-bold" value=${t} />\n        <button class="increment">\n          <span class='assistive-text'>increment font weight</span>\n          <span aria-hidden="true">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n              <path d="M88.2 38.5c6.2 0 11.2 4.9 11.2 11.1 0 6.2-5 11.2-11.2 11.3l-27.1.2-.2 27.1c-.1 6.1-5.1 11.1-11.3 11.1-6.2 0-11.1-5-11.1-11.1l.2-26.9-27 .2C5.5 61.5.5 56.6.5 50.4c0-6.2 5-11.2 11.2-11.3l27.1-.2.2-27.1C39.1 5.7 44.1.7 50.3.7c6.2 0 11.1 5 11.1 11.1l-.2 26.9 27-.2z" />\n            </svg>\n          </span>          \n        </button>\n        <span class="current-weight assistive-text" aria-live="assertive">current font weight is ${t}</span>\n      </span>\n    </span>\n  `;s.innerHTML=n,document.getElementById("colophon").prepend(s);const i=document.querySelectorAll(".font-settings input"),a=document.querySelectorAll(".font-settings button"),r=document.querySelector('.font-settings input[type="number"');for(const e of a)e.addEventListener("click",(function(e){const t=e.currentTarget;t.classList.contains("increment")&&(r.stepUp(),o(r.value)),t.classList.contains("decrement")&&(r.stepDown(),o(r.value))}));for(const t of i)e(t,"change input",(function(e){const t=e.target;o(t.value)}));const o=e=>{document.documentElement.style.setProperty("--variable-wght-bold",e),localStorage.setItem("font_weight",e),document.querySelector(".current-weight").innerText=`Current font weight is ${getComputedStyle(document.documentElement).getPropertyValue("--variable-wght-bold")}`,i.forEach((e=>e.value=getComputedStyle(document.documentElement).getPropertyValue("--variable-wght-bold")))}}(),function(){if("not all"===window.matchMedia("(prefers-color-scheme)").media)return;window.localStorage.color_scheme||localStorage.setItem("color_scheme","system");const e=window.matchMedia("(prefers-color-scheme: dark)"),t=function(e){return e?"dark":"light"},s=function(n,i=!1){const a=document.querySelector("html");switch(n){case"dark":a.classList.add("dark-mode"),i&&localStorage.setItem("color_scheme","dark");break;case"light":a.classList.remove("dark-mode"),i&&localStorage.setItem("color_scheme","light");break;default:s(t(e.matches)),i&&localStorage.setItem("color_scheme","system")}};s(window.localStorage.color_scheme),e.addEventListener("change",(function(e){"dark"!==window.localStorage.color_scheme&&"light"!==window.localStorage.color_scheme&&s(t(e.matches))}));const n=document.createElement("fieldset");n.classList.add("color-theme-switcher","sans-bold-italic"),n.innerHTML='\n    <legend>Color Scheme</legend>\n    <input class="assistive-text" type="radio" id="system" name="color-scheme" value="system">\n    <label for="system">System</label>\n    <input class="assistive-text" type="radio" id="dark" name="color-scheme" value="dark">\n    <label for="dark">Dark</label>\n    <input class="assistive-text" type="radio" id="light" name="color-scheme" value="light">\n    <label for="light">Light</label>\n  ',document.getElementById("colophon").prepend(n);const i=document.querySelectorAll(".color-theme-switcher input");for(const e of i)e.value===window.localStorage.color_scheme&&(e.checked=!0),e.addEventListener("click",(function(e){const t=e.target;s(t.value,!0)}))}(),function(){const e=document.querySelector(".jump-link"),t=document.querySelector("#home-content");if(!e)return;e.classList.add("hidden"),new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting?e.classList.add("hidden"):e.classList.remove("hidden")}))})).observe(t)}(),function(){const e="localhost"===window.location.hostname;"serviceWorker"in navigator&&!e&&navigator.serviceWorker.register("/sw.js").then((function(){return navigator.serviceWorker.ready}))}()}));
